jobs:
  build35:
    docker:
      - image: python:3.5
    steps:
      - checkout
      - run:
          name: install-tox
          command: pip install --upgrade tox
      - run:
          name: test
          command: tox -e py35
  build36:
    docker:
      - image: python:3.6
    steps:
      - checkout
      - run:
          name: install-tox
          command: pip install --upgrade tox
      - run:
          name: test
          command: tox -e py36
  build37:
    docker:
      - image: python:3.7
    steps:
      - checkout
      - run:
          name: install-tox
          command: pip install --upgrade tox
      - run:
          name: test
          command: tox -e py37
  check-format:
    docker:
      - image: python:3.7
    steps:
      - checkout
      - run:
          name: install-tox
          command: pip install --upgrade tox
      - run:
          name: test
          command: tox -e check-format
  flake8:
    docker:
      - image: python:3.7
    steps:
      - checkout
      - run:
          name: install-tox
          command: pip install --upgrade tox
      - run:
          name: test
          command: tox -e flake8
  bandit:
    docker:
      - image: python:3.7
    steps:
      - checkout
      - run:
          name: install-tox
          command: pip install --upgrade tox
      - run:
          name: test
          command: tox -e bandit
  publish-coverage:
    docker:
      - image: python:3.7
    steps:
      - checkout
      - run:
          name: install-tox
          command: pip install --upgrade tox
      - run:
          name: test
          command: tox -e publish-coverage

workflows:
  version: 2
  tests:
    jobs:
      - build35
      - build36
      - build37
  lint:
    jobs:
      - check-format
      - flake8
      - bandit
      - publish-coverage
